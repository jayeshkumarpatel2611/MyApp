name: Deploy Service
on: 
   workflow_dispatch:
    
    inputs:
      myInput:
        default: "Input JSON Object"
        required: true
        type: string


jobs:
  Stage2:
    name: "Service Deployment - ${{ matrix.server.name }}"
    runs-on: ubuntu-latest
    needs: Stage1
    strategy:
      matrix:
        server: ${{ fromJson(${{ inputs.myInput }}) }}
    steps:
    - name: Display JSON
      shell: pwsh          
      run: | 
           Write-Host "Host IP Address : " ${{ matrix.server.ip }}
           Write-Host "Server Username : " ${{ matrix.server.username }}
           Write-Host "Server Port     : " ${{ matrix.server.port }}

